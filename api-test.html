<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KidoScanner - Status Check</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>üöÄ KidoScanner Status Check</h1>
        <div id="status"></div>
        <div id="api-test"></div>
        <button onclick="testLiveCoinWatchAPI()">Test LiveCoinWatch API</button>
        <button onclick="window.location.href='/'">Back to Scanner</button>
    </div>

    <script>
        // Test LiveCoinWatch API
        async function testLiveCoinWatchAPI() {
            const statusDiv = document.getElementById('status');
            const apiTestDiv = document.getElementById('api-test');
            
            statusDiv.innerHTML = 'üîÑ Testing LiveCoinWatch API...';
            apiTestDiv.innerHTML = 'Making API request...';
            
            try {
                const response = await fetch('https://api.livecoinwatch.com/coins/list', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'x-api-key': '001020d6-7b72-4246-8add-dacb61a40cb0'
                    },
                    body: JSON.stringify({
                        currency: "USD",
                        sort: "rank",
                        order: "ascending",
                        offset: 0,
                        limit: 5,
                        meta: false
                    })
                });
                
                if (response.ok) {
                    const data = await response.json();
                    statusDiv.innerHTML = '‚úÖ LiveCoinWatch API is working!';
                    apiTestDiv.innerHTML = `
                        <h3>API Response:</h3>
                        <pre>${JSON.stringify(data, null, 2)}</pre>
                        <h3>Status: ${response.status}</h3>
                        <h3>Headers: ${JSON.stringify(Object.fromEntries(response.headers.entries()))}</h3>
                    `;
                } else {
                    statusDiv.innerHTML = '‚ùå LiveCoinWatch API failed';
                    apiTestDiv.innerHTML = `
                        <h3>Error: HTTP ${response.status}</h3>
                        <h3>Response: ${await response.text()}</h3>
                    `;
                }
            } catch (error) {
                statusDiv.innerHTML = '‚ùå Connection failed';
                apiTestDiv.innerHTML = `<h3>Error: ${error.message}</h3>`;
            }
        }
    </script>
</body>
</html>